<!DOCTYPE html>
<html>
<head>
  <title>Irrigation Log with GPS</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
  <h3>Ready to log reel position</h3>
  <p id="status">Getting your GPS locationâ€¦</p>

  <button id="continueBtn" style="display:none;" onclick="goToForm()">Continue to Form</button>

  <script>
    let lat = null, lon = null;

    function goToForm() {
      if (lat !== null && lon !== null) {
        const formURL = "https://docs.google.com/forms/d/e/1FAIpQLSfcTiFA-9oyDyra7B1fNNrPH6tNP_GdOALD4MSRWLSU-ZDpbw/viewform?usp=pp_url" +
          "&entry.1325739711=" + encodeURIComponent(lat) +
          "&entry.2110473159=" + encodeURIComponent(lon);
        window.location.href = formURL;
      } else {
        alert("Location not yet available.");
      }
    }

    navigator.geolocation.getCurrentPosition(function(pos) {
      lat = pos.coords.latitude;
      lon = pos.coords.longitude;
      document.getElementById("status").textContent = "Location ready.";
      document.getElementById("continueBtn").style.display = "inline-block";
    }, function(err) {
      document.getElementById("status").textContent = "Could not get location. Please allow GPS access.";
    });
  </script>
</body>
</html>
